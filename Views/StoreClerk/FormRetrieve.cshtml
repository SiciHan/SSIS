
@model Team8ADProjectSSIS.Models.Retrieval
@using Team8ADProjectSSIS.Models;
@{
    ViewBag.Title = "FormRetrieve";
    Boolean NoDisbursement = (Boolean)ViewData["NoDisbursement"];
    List<Retrieval> RetrievalForm = (List<Retrieval>)ViewData["RetrievalForm"];
    List<Retrieval> RetrievalItem = (List<Retrieval>)ViewData["RetrievalItem"];
}
    <html>
    <head>
        <!-- Bootstrap -->
        <script type="text/javascript" src='https://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.8.3.min.js'></script>
        <script type="text/javascript" src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.0.3/js/bootstrap.min.js'></script>
        <link rel="stylesheet" href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.0.3/css/bootstrap.min.css'
              media="screen" />
        <!-- Bootstrap -->
        <!-- Bootstrap DatePicker -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/css/bootstrap-datepicker.css" type="text/css" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/js/bootstrap-datepicker.js" type="text/javascript"></script>
        <!-- Bootstrap DatePicker -->
        <script type="text/javascript">
            $(function () {
                $('#StartDate').datepicker({
                    format: "dd-mm-yyyy",
                });
            });
            $(function () {
                $('#EndDate').datepicker({
                    format: "dd-mm-yyyy",
                });
            });
        </script>
    </head>
    <body>
        <div class="navbar navbar-default navbar-fixed-top">
            <div class="container">

                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    @Html.ActionLink("Application name", "Index", "Home", new { area = "" }, new { @class = "navbar-brand" })
                </div>

                <div class="navbar-collapse collapse">
                    <ul class="nav navbar-nav">
                        <li>@Html.ActionLink("Dashboard", "Index", "StoreClerk")</li>
                        <li>@Html.ActionLink("Retrieval", "FormRetrieve", "StoreClerk")</li>
                        <li>@Html.ActionLink("Disbursement", "Index", "StoreClerk")</li>
                        <li class="active">@Html.ActionLink("Purchase Order", "PurchaseOrderList", "StoreClerk")</li>
                        <li>@Html.ActionLink("StockTake", "Index", "StoreClerk")</li>
                    </ul>
                    <ul class="nav navbar-nav navbar-right">
                        <li><a href="#"><span class="glyphicon glyphicon-bell"></span> <span class="badge badge-pill badge-primary badge-danger">3</span></a></li>
                        <li><a href="@Url.Action("Logout","Home")"><span class="glyphicon glyphicon-log-in"></span> Logout</a></li>
                    </ul>
                </div>
            </div>
        </div>
        <h2>Form Retrieve</h2>

        @if (!NoDisbursement)
        {
            <div><h2>You are Retriving Disbursement List status as "Preparing"</h2></div>
        }
        else
        {
            if (ViewBag.StartDate == "" && ViewBag.EndDate == "")
            {
                <div>
                    @using (Html.BeginForm("FormRetrieve", "StoreClerk", FormMethod.Post))
                    {
                        <table>
                            <tr>
                                <td><h5>Start Date: </h5></td>
                                <td>@Html.TextBox("StartDate", "", new { @class = "form-control datepicker", placeholder = ViewBag.LastThu })</td>
                                <td><h5>End Date: </h5></td>
                                <td>@Html.TextBox("EndDate", "", new { @class = "form-control datepicker", placeholder = ViewBag.Today })</td>
                                <td>
                                    <input type="submit" name="GetRetrievalForm" value="Get Retrieval Form" />
                                </td>

                            </tr>
                        </table>
                    }
                </div>
            }
            else
            {
                <div><h2>Congratulation you are at Get Retrieval Form page!!</h2></div>
                using (Html.BeginForm("SaveDisbursement", "StoreClerk", FormMethod.Post))
                {

                    foreach (var retrievalform in RetrievalForm)
                    {

                        <table>
                            <tr>
                                <th colspan="2" align="right">Description</th>>
                                <th>Total Needed</th>
                                <th>Total Collect</th>
                                <th>Total Available</th>
                            </tr>
                            <tr>
                                <td>
                                    <input type="checkbox" name="IdItemRetrieved" value="@retrievalform.IdItem" />
                                    <input type="hidden" name="StockUnit" value="@retrievalform.StockUnit" />
                                    <input type="hidden" name="RequestUnit" value="@retrievalform.Unit" />
                                </td>
                                <td align="center">@retrievalform.Description </td>
                                <td align="center">@retrievalform.Unit</td>
                                <td align="center">0</td>
                                <td align="center">@retrievalform.StockUnit</td>
                            </tr>

                        </table>

                    }
                    <div><input type="submit" value="Retrieve" /></div>
                }
            }

        }
    </body>
    </html>

